import{r as D,_ as U}from"./index-B1QSJmDc.js";import{s as $,t as q,v as I,E as L}from"./element-aSOru_k-.js";import{u as O}from"./usePagination-ej6RUfcC.js";import{l as Z,r as y,Z as j,d as G,ah as n,ap as H,m as s,p as J,P as x,M as i,O as e,U as t,u as l,S as c,q as S,R as K}from"./vue-Bll-6hFI.js";import"./vxe-BvPjuzEQ.js";function Q(p){return D({url:"translates",method:"get",params:p})}function W(p){return D({url:`/translate/${p}`,method:"delete"})}const X={class:"app-container"},Y={class:"table-wrapper"},ee={class:"pager-wrapper"},te=Z({name:"Translate",__name:"index",setup(p){const P="https://ezwork-api.erui.com",_=y(!1),{paginationData:a,handleCurrentChange:B,handleSizeChange:T}=O(),V=o=>{I.confirm(`正在删除文档：${o.translate_no}，确认删除？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{W(o.id).then(()=>{L.success("删除成功"),g()})})},m=y([]),k=y(null),d=j({keyword:""}),g=()=>{_.value=!0,Q({page:a.currentPage,limit:a.pageSize,keyword:d.keyword||void 0}).then(({data:o})=>{a.total=o.total,m.value=o.data}).catch(()=>{m.value=[]}).finally(()=>{_.value=!1})},v=()=>{a.currentPage===1?g():a.currentPage=1},E=()=>{var o;(o=k.value)==null||o.resetFields(),v()};return G([()=>a.currentPage,()=>a.pageSize],g,{immediate:!0}),(o,w)=>{const N=n("el-input"),b=n("el-form-item"),h=n("el-button"),R=n("el-form"),C=n("el-card"),u=n("el-table-column"),f=n("el-tag"),A=n("el-link"),F=n("el-table"),M=n("el-pagination"),z=H("loading");return s(),J("div",X,[x((s(),i(C,{shadow:"never",class:"search-wrapper"},{default:e(()=>[t(R,{ref_key:"searchFormRef",ref:k,inline:!0,model:d},{default:e(()=>[t(b,{prop:"keyword",label:""},{default:e(()=>[t(N,{modelValue:d.keyword,"onUpdate:modelValue":w[0]||(w[0]=r=>d.keyword=r),placeholder:"输入查询"},null,8,["modelValue"])]),_:1}),t(b,null,{default:e(()=>[t(h,{type:"primary",icon:l($),onClick:v},{default:e(()=>[c("查询")]),_:1},8,["icon"]),t(h,{icon:l(q),onClick:E},{default:e(()=>[c("重置")]),_:1},8,["icon"])]),_:1})]),_:1},8,["model"])]),_:1})),[[z,_.value]]),x((s(),i(C,{shadow:"never"},{default:e(()=>[S("div",Y,[t(F,{data:m.value},{default:e(()=>[t(u,{prop:"customer_no",label:"所属用户ID",align:"center"}),t(u,{prop:"origin_filename",label:"文档名称",align:"center"}),t(u,{prop:"status",label:"任务状态",align:"center"},{default:e(r=>[r.row.status=="none"?(s(),i(f,{key:0,type:"primary",effect:"plain"},{default:e(()=>[c("未完成")]),_:1})):r.row.status=="process"?(s(),i(f,{key:1,type:"warning",effect:"plain"},{default:e(()=>[c("翻译中")]),_:1})):r.row.status=="failed"?(s(),i(f,{key:2,type:"danger",effect:"plain"},{default:e(()=>[c("翻译失败")]),_:1})):(s(),i(f,{key:3,type:"success",effect:"plain"},{default:e(()=>[c("已完成")]),_:1}))]),_:1}),t(u,{prop:"start_at",label:"任务开始时间",align:"center"}),t(u,{prop:"spend_time",label:"完成用时",align:"center"}),t(u,{fixed:"right",label:"操作",width:"150",align:"center"},{default:e(r=>[r.row.target_filepath?(s(),i(A,{key:0,href:l(P)+r.row.target_filepath},{default:e(()=>[c("下载")]),_:2},1032,["href"])):K("",!0),t(h,{type:"danger",text:"",bg:"",size:"small",onClick:ae=>V(r.row)},{default:e(()=>[c("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),S("div",ee,[t(M,{background:"",layout:l(a).layout,"page-sizes":l(a).pageSizes,total:l(a).total,"page-size":l(a).pageSize,currentPage:l(a).currentPage,onSizeChange:l(T),onCurrentChange:l(B)},null,8,["layout","page-sizes","total","page-size","currentPage","onSizeChange","onCurrentChange"])])]),_:1})),[[z,_.value]])])}}}),ce=U(te,[["__scopeId","data-v-c65b3be3"]]);export{ce as default};
